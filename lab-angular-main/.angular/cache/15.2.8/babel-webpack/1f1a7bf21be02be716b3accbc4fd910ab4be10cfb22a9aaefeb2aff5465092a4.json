{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/data.service\";\nimport * as i2 from \"src/app/core/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../../../shared/search-filter/search-filter.component\";\nfunction ProductListComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r4);\n  }\n}\nfunction ProductListComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nfunction ProductListComponent_tr_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 16);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_32_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const product_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.viewProduct(product_r5.id));\n    });\n    i0.ɵɵtext(13, \"View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_32_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const product_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.editProduct(product_r5.id));\n    });\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_32_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const product_r5 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.deleteProduct(product_r5.id));\n    });\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.category || \"N/A\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.getAvailabilityClass(product_r5.availabilityStatus));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(product_r5.availabilityStatus);\n  }\n}\nfunction ProductListComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"No products found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class ProductListComponent {\n  constructor(dataService, authService, router) {\n    this.dataService = dataService;\n    this.authService = authService;\n    this.router = router;\n    this.searchTerm = '';\n    this.filteredProducts = [];\n    this.products = [];\n    this.categories = ['Electronics', 'Clothing', 'Books', 'SkinCare', 'Health'];\n    this.selectedCategory = '';\n    this.stockAlerts = [];\n    this.lowStockThreshold = 5;\n    this.errorMessage = null;\n    this.userRole = '';\n  }\n  ngOnInit() {\n    this.loadProducts();\n    this.loadUserData();\n  }\n  ngOnDestroy() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  }\n  loadProducts() {\n    this.dataService.getProducts().subscribe({\n      next: products => {\n        this.products = products.map(product => ({\n          ...product,\n          availabilityStatus: this.getAvailabilityStatus(product.quantity) || 'Out of Stock'\n        }));\n        this.applyFilters();\n      },\n      error: err => this.errorMessage = err.message\n    });\n  }\n  loadUserData() {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    this.userRole = user.role || 'user';\n  }\n  applyFilters() {\n    let tempProducts = [...this.products];\n    if (this.selectedCategory) {\n      tempProducts = tempProducts.filter(product => product.category === this.selectedCategory);\n    }\n    if (this.searchTerm) {\n      tempProducts = tempProducts.filter(product => product.name.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n    this.filteredProducts = tempProducts;\n    this.checkStockAlerts();\n  }\n  onSearch(event) {\n    this.searchTerm = event;\n    this.applyFilters();\n  }\n  onCategoryChange(category) {\n    this.selectedCategory = category;\n    this.applyFilters();\n  }\n  viewProduct(id) {\n    if (id !== undefined) {\n      this.router.navigate([`/inventory/product-detail/${id}`]);\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n  editProduct(id) {\n    if (id !== undefined) {\n      if (this.userRole === 'user') {\n        alert('Only admin have the access');\n        return;\n      }\n      const pin = prompt('Enter admin pin (4 digits):');\n      if (pin && this.authService.verifyAdminPin(pin)) {\n        this.router.navigate([`/inventory/update-product/${id}`]);\n      } else {\n        alert('Invalid admin pin.');\n      }\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n  deleteProduct(productId) {\n    if (productId !== undefined) {\n      if (this.userRole === 'user') {\n        alert('Only admin have the access');\n        return;\n      }\n      const pin = prompt('Enter admin pin (4 digits):');\n      if (pin && this.authService.verifyAdminPin(pin)) {\n        this.dataService.deleteProduct(productId).subscribe({\n          next: () => this.loadProducts(),\n          error: err => this.errorMessage = err.message\n        });\n      } else {\n        alert('Invalid admin pin.');\n      }\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n  checkStockAlerts() {\n    this.stockAlerts = [];\n    this.products.forEach(product => {\n      if (product.quantity < this.lowStockThreshold) {\n        this.stockAlerts.push(`${product.name} is low in stock (${product.quantity} units remaining)`);\n      }\n    });\n    if (this.stockAlerts.length > 0) {\n      alert(this.stockAlerts.join('\\n'));\n    }\n  }\n  getAvailabilityStatus(quantity) {\n    if (quantity > 10) return 'In Stock';\n    if (quantity > 0) return 'Low Stock';\n    return 'Out of Stock';\n  }\n  getAvailabilityClass(status) {\n    return status ? status.toLowerCase().replace(' ', '-') : 'out-of-stock';\n  }\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"app-product-list\"]],\n  decls: 34,\n  vars: 5,\n  consts: [[1, \"inventory-container\"], [1, \"user-info\"], [1, \"search-add-container\"], [3, \"search\"], [1, \"category-filter\"], [\"for\", \"category\"], [\"id\", \"category\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"/inventory/add-product\", 1, \"add-button\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"product-table\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"value\"], [1, \"error-message\"], [3, \"ngClass\"], [3, \"click\"]],\n  template: function ProductListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"Product List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"div\", 1);\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"app-search-filter\", 3);\n      i0.ɵɵlistener(\"search\", function ProductListComponent_Template_app_search_filter_search_5_listener($event) {\n        return ctx.onSearch($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"label\", 5);\n      i0.ɵɵtext(8, \"Filter by Category:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"select\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_9_listener($event) {\n        return ctx.selectedCategory = $event;\n      })(\"ngModelChange\", function ProductListComponent_Template_select_ngModelChange_9_listener($event) {\n        return ctx.onCategoryChange($event);\n      });\n      i0.ɵɵelementStart(10, \"option\", 7);\n      i0.ɵɵtext(11, \"All Categories\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, ProductListComponent_option_12_Template, 2, 2, \"option\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"a\", 9);\n      i0.ɵɵtext(14, \"Add Product\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(15, ProductListComponent_div_15_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementStart(16, \"table\", 11)(17, \"thead\")(18, \"tr\")(19, \"th\");\n      i0.ɵɵtext(20, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"th\");\n      i0.ɵɵtext(24, \"Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\");\n      i0.ɵɵtext(26, \"Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"th\");\n      i0.ɵɵtext(28, \"Availability\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"th\");\n      i0.ɵɵtext(30, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"tbody\");\n      i0.ɵɵtemplate(32, ProductListComponent_tr_32_Template, 18, 6, \"tr\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(33, ProductListComponent_div_33_Template, 2, 0, \"div\", 13);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCategory);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredProducts);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.filteredProducts.length === 0);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i6.SearchFilterComponent, i3.RouterLink],\n  styles: [\".inventory-container[_ngcontent-%COMP%] {\\r\\n  padding: 20px;\\r\\n}\\r\\n\\r\\nh2[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.search-add-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  align-items: center;\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.category-filter[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.category-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.category-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\r\\n  padding: 5px;\\r\\n  border-radius: 4px;\\r\\n  border: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n.add-button[_ngcontent-%COMP%] {\\r\\n  background-color: #4CAF50;\\r\\n  color: white;\\r\\n  padding: 10px 20px;\\r\\n  text-decoration: none;\\r\\n  border-radius: 4px;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  border-collapse: collapse;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n  border: 1px solid #ddd;\\r\\n  padding: 8px;\\r\\n  text-align: left;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n  background-color: #f2f2f2;\\r\\n}\\r\\n\\r\\n.in-stock[_ngcontent-%COMP%] {\\r\\n  color: green;\\r\\n}\\r\\n\\r\\n.low-stock[_ngcontent-%COMP%] {\\r\\n  color: orange;\\r\\n}\\r\\n\\r\\n.out-of-stock[_ngcontent-%COMP%] {\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  margin-right: 5px;\\r\\n  padding: 5px 10px;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child {\\r\\n  background-color: #2196F3;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2) {\\r\\n  background-color: #FFC107;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n.product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child {\\r\\n  background-color: #f44336;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.error-message[_ngcontent-%COMP%] {\\r\\n  color: #ff0000;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.user-info[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 10px;\\r\\n  font-style: italic;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvaW52ZW50b3J5L3Byb2R1Y3QtbGlzdC9wcm9kdWN0LWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gseUJBQXlCO0FBQzNCOztBQUVBOztFQUVFLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtBQUNkOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQiIsInNvdXJjZXNDb250ZW50IjpbIi5pbnZlbnRvcnktY29udGFpbmVyIHtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG59XHJcblxyXG5oMiB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uc2VhcmNoLWFkZC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxufVxyXG5cclxuLmNhdGVnb3J5LWZpbHRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uY2F0ZWdvcnktZmlsdGVyIGxhYmVsIHtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi5jYXRlZ29yeS1maWx0ZXIgc2VsZWN0IHtcclxuICBwYWRkaW5nOiA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbn1cclxuXHJcbi5hZGQtYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxufVxyXG5cclxuLnByb2R1Y3QtdGFibGUge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbn1cclxuXHJcbi5wcm9kdWN0LXRhYmxlIHRoLFxyXG4ucHJvZHVjdC10YWJsZSB0ZCB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICBwYWRkaW5nOiA4cHg7XHJcbiAgdGV4dC1hbGlnbjogbGVmdDtcclxufVxyXG5cclxuLnByb2R1Y3QtdGFibGUgdGgge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XHJcbn1cclxuXHJcbi5pbi1zdG9jayB7XHJcbiAgY29sb3I6IGdyZWVuO1xyXG59XHJcblxyXG4ubG93LXN0b2NrIHtcclxuICBjb2xvcjogb3JhbmdlO1xyXG59XHJcblxyXG4ub3V0LW9mLXN0b2NrIHtcclxuICBjb2xvcjogcmVkO1xyXG59XHJcblxyXG4ucHJvZHVjdC10YWJsZSBidXR0b24ge1xyXG4gIG1hcmdpbi1yaWdodDogNXB4O1xyXG4gIHBhZGRpbmc6IDVweCAxMHB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ucHJvZHVjdC10YWJsZSBidXR0b246Zmlyc3QtY2hpbGQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMyMTk2RjM7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4ucHJvZHVjdC10YWJsZSBidXR0b246bnRoLWNoaWxkKDIpIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZDMTA3O1xyXG4gIGNvbG9yOiBibGFjaztcclxufVxyXG5cclxuLnByb2R1Y3QtdGFibGUgYnV0dG9uOmxhc3QtY2hpbGQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNDQzMzY7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4uZXJyb3ItbWVzc2FnZSB7XHJcbiAgY29sb3I6ICNmZjAwMDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLnVzZXItaW5mbyB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IAUQA,kCAA+D;IAAAA,YAAc;IAAAA,iBAAS;;;;IAA1CA,mCAAkB;IAACA,eAAc;IAAdA,iCAAc;;;;;IAKnFA,+BAAgD;IAAAA,YAAkB;IAAAA,iBAAM;;;;IAAxBA,eAAkB;IAAlBA,yCAAkB;;;;;;IAa9DA,0BAA6C;IACvCA,YAAkB;IAAAA,iBAAK;IAC3BA,0BAAI;IAAAA,YAAmB;IAAAA,iBAAK;IAC5BA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;IAC/BA,0BAAI;IAAAA,YAA+B;IAAAA,iBAAK;IACxCA,8BAAiE;IAAAA,aAAgC;IAAAA,iBAAK;IACtGA,2BAAI;IACMA;MAAA;MAAA;MAAA;MAAA,OAASA,gDAAuB;IAAA,EAAC;IAACA,qBAAI;IAAAA,iBAAS;IACvDA,mCAA0C;IAAlCA;MAAA;MAAA;MAAA;MAAA,OAASA,gDAAuB;IAAA,EAAC;IAACA,qBAAI;IAAAA,iBAAS;IACvDA,mCAA4C;IAApCA;MAAA;MAAA;MAAA;MAAA,OAASA,kDAAyB;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;;IARzDA,eAAkB;IAAlBA,qCAAkB;IAClBA,eAAmB;IAAnBA,sCAAmB;IACnBA,eAAsB;IAAtBA,yCAAsB;IACtBA,eAA+B;IAA/BA,kDAA+B;IAC/BA,eAA4D;IAA5DA,oFAA4D;IAACA,eAAgC;IAAhCA,mDAAgC;;;;;IASvGA,2BAA2C;IAAAA,kCAAkB;IAAAA,iBAAM;;;AC/BrE,OAAM,MAAOC,oBAAoB;EAY/BC,YACUC,WAAwB,EACxBC,WAAwB,EACxBC,MAAc;IAFd,gBAAW,GAAXF,WAAW;IACX,gBAAW,GAAXC,WAAW;IACX,WAAM,GAANC,MAAM;IAdhB,eAAU,GAAW,EAAE;IACvB,qBAAgB,GAAc,EAAE;IAChC,aAAQ,GAAc,EAAE;IACxB,eAAU,GAAa,CAAC,aAAa,EAAE,UAAU,EAAC,OAAO,EAAC,UAAU,EAAC,QAAQ,CAAC;IAC9E,qBAAgB,GAAW,EAAE;IAC7B,gBAAW,GAAa,EAAE;IAC1B,sBAAiB,GAAW,CAAC;IAC7B,iBAAY,GAAkB,IAAI;IAClC,aAAQ,GAAW,EAAE;EAOlB;EAEHC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;IACnB,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAC,WAAW;IACT,IAAI,IAAI,CAACC,KAAK,EAAE;MACdC,aAAa,CAAC,IAAI,CAACD,KAAK,CAAC;;EAE7B;EAEAH,YAAY;IACV,IAAI,CAACJ,WAAW,CAACS,WAAW,EAAE,CAACC,SAAS,CAAC;MACvCC,IAAI,EAAGC,QAAmB,IAAI;QAC5B,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAACC,GAAG,CAACC,OAAO,KAAK;UACvC,GAAGA,OAAO;UACVC,kBAAkB,EAAE,IAAI,CAACC,qBAAqB,CAACF,OAAO,CAACG,QAAQ,CAAC,IAAI;SACrE,CAAC,CAAC;QACH,IAAI,CAACC,YAAY,EAAE;MACrB,CAAC;MACDC,KAAK,EAAGC,GAAU,IAAK,IAAI,CAACC,YAAY,GAAGD,GAAG,CAACE;KAChD,CAAC;EACJ;EAEAjB,YAAY;IACV,MAAMkB,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;IAC7D,IAAI,CAACC,QAAQ,GAAGL,IAAI,CAACM,IAAI,IAAI,MAAM;EACrC;EAIAX,YAAY;IACV,IAAIY,YAAY,GAAc,CAAC,GAAG,IAAI,CAAClB,QAAQ,CAAC;IAChD,IAAI,IAAI,CAACmB,gBAAgB,EAAE;MACzBD,YAAY,GAAGA,YAAY,CAACE,MAAM,CAAClB,OAAO,IAAIA,OAAO,CAACmB,QAAQ,KAAK,IAAI,CAACF,gBAAgB,CAAC;;IAE3F,IAAI,IAAI,CAACG,UAAU,EAAE;MACnBJ,YAAY,GAAGA,YAAY,CAACE,MAAM,CAAClB,OAAO,IACxCA,OAAO,CAACqB,IAAI,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,IAAI,CAACH,UAAU,CAACE,WAAW,EAAE,CAAC,CACnE;;IAEH,IAAI,CAACE,gBAAgB,GAAGR,YAAY;IACpC,IAAI,CAACS,gBAAgB,EAAE;EACzB;EAEAC,QAAQ,CAACC,KAAa;IACpB,IAAI,CAACP,UAAU,GAAGO,KAAK;IACvB,IAAI,CAACvB,YAAY,EAAE;EACrB;EAEAwB,gBAAgB,CAACT,QAAgB;IAC/B,IAAI,CAACF,gBAAgB,GAAGE,QAAQ;IAChC,IAAI,CAACf,YAAY,EAAE;EACrB;EAEAyB,WAAW,CAACC,EAAsB;IAChC,IAAIA,EAAE,KAAKC,SAAS,EAAE;MACpB,IAAI,CAAC3C,MAAM,CAAC4C,QAAQ,CAAC,CAAC,6BAA6BF,EAAE,EAAE,CAAC,CAAC;KAC1D,MAAM;MACL,IAAI,CAACvB,YAAY,GAAG,yBAAyB;;EAEjD;EAEA0B,WAAW,CAACH,EAAsB;IAChC,IAAIA,EAAE,KAAKC,SAAS,EAAE;MACpB,IAAI,IAAI,CAACjB,QAAQ,KAAK,MAAM,EAAE;QAC5BoB,KAAK,CAAC,4BAA4B,CAAC;QACnC;;MAEF,MAAMC,GAAG,GAAGC,MAAM,CAAC,6BAA6B,CAAC;MACjD,IAAID,GAAG,IAAI,IAAI,CAAChD,WAAW,CAACkD,cAAc,CAACF,GAAG,CAAC,EAAE;QAC/C,IAAI,CAAC/C,MAAM,CAAC4C,QAAQ,CAAC,CAAC,6BAA6BF,EAAE,EAAE,CAAC,CAAC;OAC1D,MAAM;QACLI,KAAK,CAAC,oBAAoB,CAAC;;KAE9B,MAAM;MACL,IAAI,CAAC3B,YAAY,GAAG,yBAAyB;;EAEjD;EAEA+B,aAAa,CAACC,SAA6B;IACzC,IAAIA,SAAS,KAAKR,SAAS,EAAE;MAC3B,IAAI,IAAI,CAACjB,QAAQ,KAAK,MAAM,EAAE;QAC5BoB,KAAK,CAAC,4BAA4B,CAAC;QACnC;;MAEF,MAAMC,GAAG,GAAGC,MAAM,CAAC,6BAA6B,CAAC;MACjD,IAAID,GAAG,IAAI,IAAI,CAAChD,WAAW,CAACkD,cAAc,CAACF,GAAG,CAAC,EAAE;QAC/C,IAAI,CAACjD,WAAW,CAACoD,aAAa,CAACC,SAAS,CAAC,CAAC3C,SAAS,CAAC;UAClDC,IAAI,EAAE,MAAM,IAAI,CAACP,YAAY,EAAE;UAC/Be,KAAK,EAAGC,GAAU,IAAK,IAAI,CAACC,YAAY,GAAGD,GAAG,CAACE;SAChD,CAAC;OACH,MAAM;QACL0B,KAAK,CAAC,oBAAoB,CAAC;;KAE9B,MAAM;MACL,IAAI,CAAC3B,YAAY,GAAG,yBAAyB;;EAEjD;EAEAkB,gBAAgB;IACd,IAAI,CAACe,WAAW,GAAG,EAAE;IACrB,IAAI,CAAC1C,QAAQ,CAAC2C,OAAO,CAACzC,OAAO,IAAG;MAC9B,IAAIA,OAAO,CAACG,QAAQ,GAAG,IAAI,CAACuC,iBAAiB,EAAE;QAC7C,IAAI,CAACF,WAAW,CAACG,IAAI,CAAC,GAAG3C,OAAO,CAACqB,IAAI,qBAAqBrB,OAAO,CAACG,QAAQ,mBAAmB,CAAC;;IAElG,CAAC,CAAC;IACF,IAAI,IAAI,CAACqC,WAAW,CAACI,MAAM,GAAG,CAAC,EAAE;MAC/BV,KAAK,CAAC,IAAI,CAACM,WAAW,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC;;EAEtC;EAEA3C,qBAAqB,CAACC,QAAgB;IACpC,IAAIA,QAAQ,GAAG,EAAE,EAAE,OAAO,UAAU;IACpC,IAAIA,QAAQ,GAAG,CAAC,EAAE,OAAO,WAAW;IACpC,OAAO,cAAc;EACvB;EAEA2C,oBAAoB,CAACC,MAA0B;IAC7C,OAAOA,MAAM,GAAGA,MAAM,CAACzB,WAAW,EAAE,CAAC0B,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,cAAc;EACzE;;AA1IWhE,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;QAApBA,oBAAoB;EAAAiE;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDXjCtE,8BAAiC;MAC3BA,4BAAY;MAAAA,iBAAK;MACrBA,yBACM;MACNA,8BAAkC;MACbA;QAAA,OAAUuE,oBAAgB;MAAA,EAAC;MAACvE,iBAAoB;MACnEA,8BAA6B;MACLA,mCAAmB;MAAAA,iBAAQ;MACjDA,iCAAgG;MAA1EA;QAAA;MAAA,EAA8B;QAAA,OAAkBuE,4BAAwB;MAAA,EAA1C;MAClDvE,kCAAiB;MAAAA,+BAAc;MAAAA,iBAAS;MACxCA,6EAAsF;MACxFA,iBAAS;MAEXA,6BAA0D;MAAAA,4BAAW;MAAAA,iBAAI;MAE3EA,wEAAwE;MACxEA,kCAA6B;MAGnBA,qBAAI;MAAAA,iBAAK;MACbA,2BAAI;MAAAA,sBAAK;MAAAA,iBAAK;MACdA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MACjBA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MACjBA,2BAAI;MAAAA,6BAAY;MAAAA,iBAAK;MACrBA,2BAAI;MAAAA,wBAAO;MAAAA,iBAAK;MAGpBA,8BAAO;MACLA,uEAWK;MACPA,iBAAQ;MAEVA,wEAAmE;MACrEA,iBAAM;;;MAnCsBA,eAA8B;MAA9BA,8CAA8B;MAErBA,eAAa;MAAbA,wCAAa;MAK1CA,eAAkB;MAAlBA,uCAAkB;MAaIA,gBAAmB;MAAnBA,8CAAmB;MAczCA,eAAmC;MAAnCA,wDAAmC","names":["i0","ProductListComponent","constructor","dataService","authService","router","ngOnInit","loadProducts","loadUserData","ngOnDestroy","timer","clearInterval","getProducts","subscribe","next","products","map","product","availabilityStatus","getAvailabilityStatus","quantity","applyFilters","error","err","errorMessage","message","user","JSON","parse","localStorage","getItem","userRole","role","tempProducts","selectedCategory","filter","category","searchTerm","name","toLowerCase","includes","filteredProducts","checkStockAlerts","onSearch","event","onCategoryChange","viewProduct","id","undefined","navigate","editProduct","alert","pin","prompt","verifyAdminPin","deleteProduct","productId","stockAlerts","forEach","lowStockThreshold","push","length","join","getAvailabilityClass","status","replace","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\malik\\Downloads\\Evaluation\\lab-angular-main\\src\\app\\features\\inventory\\product-list\\product-list.component.html","C:\\Users\\malik\\Downloads\\Evaluation\\lab-angular-main\\src\\app\\features\\inventory\\product-list\\product-list.component.ts"],"sourcesContent":["<div class=\"inventory-container\">\r\n  <h2>Product List</h2>\r\n  <div class=\"user-info\">\r\n  </div>\r\n  <div class=\"search-add-container\">\r\n    <app-search-filter (search)=\"onSearch($event)\"></app-search-filter>\r\n    <div class=\"category-filter\">\r\n      <label for=\"category\">Filter by Category:</label>\r\n      <select id=\"category\" [(ngModel)]=\"selectedCategory\" (ngModelChange)=\"onCategoryChange($event)\">\r\n        <option value=\"\">All Categories</option>\r\n        <option *ngFor=\"let category of categories\" [value]=\"category\">{{ category }}</option>\r\n      </select>\r\n    </div>\r\n    <a routerLink=\"/inventory/add-product\" class=\"add-button\">Add Product</a>\r\n  </div>\r\n  <div *ngIf=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n  <table class=\"product-table\">\r\n    <thead>\r\n      <tr>\r\n        <th>Name</th>\r\n        <th>Price</th>\r\n        <th>Quantity</th>\r\n        <th>Category</th>\r\n        <th>Availability</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let product of filteredProducts\">\r\n        <td>{{ product.name }}</td>\r\n        <td>{{ product.price }}</td>\r\n        <td>{{ product.quantity }}</td>\r\n        <td>{{ product.category || 'N/A' }}</td>\r\n        <td [ngClass]=\"getAvailabilityClass(product.availabilityStatus)\">{{ product.availabilityStatus }}</td>\r\n        <td>\r\n          <button (click)=\"viewProduct(product.id)\">View</button>\r\n          <button (click)=\"editProduct(product.id)\">Edit</button>\r\n          <button (click)=\"deleteProduct(product.id)\">Delete</button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <div *ngIf=\"filteredProducts.length === 0\">No products found.</div>\r\n</div>","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/core/auth.service';\nimport { DataService } from 'src/app/core/data.service';\nimport { Product } from 'src/app/shared/models/product.mode';\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})\nexport class ProductListComponent implements OnInit, OnDestroy {\n  searchTerm: string = '';\n  filteredProducts: Product[] = [];\n  products: Product[] = [];\n  categories: string[] = ['Electronics', 'Clothing','Books','SkinCare','Health'];\n  selectedCategory: string = '';\n  stockAlerts: string[] = [];\n  lowStockThreshold: number = 5;\n  errorMessage: string | null = null;\n  userRole: string = '';\n  private timer: any;\n\n  constructor(\n    private dataService: DataService,\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadProducts();\n    this.loadUserData(); \n  }\n\n  ngOnDestroy(): void {\n    if (this.timer) {\n      clearInterval(this.timer); \n    }\n  }\n\n  loadProducts(): void {\n    this.dataService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products.map(product => ({\n          ...product,\n          availabilityStatus: this.getAvailabilityStatus(product.quantity) || 'Out of Stock'\n        }));\n        this.applyFilters();\n      },\n      error: (err: Error) => this.errorMessage = err.message\n    });\n  }\n\n  loadUserData(): void {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    this.userRole = user.role || 'user';\n  }\n\n\n\n  applyFilters(): void {\n    let tempProducts: Product[] = [...this.products];\n    if (this.selectedCategory) {\n      tempProducts = tempProducts.filter(product => product.category === this.selectedCategory);\n    }\n    if (this.searchTerm) {\n      tempProducts = tempProducts.filter(product =>\n        product.name.toLowerCase().includes(this.searchTerm.toLowerCase())\n      );\n    }\n    this.filteredProducts = tempProducts;\n    this.checkStockAlerts();\n  }\n\n  onSearch(event: string): void {\n    this.searchTerm = event;\n    this.applyFilters();\n  }\n\n  onCategoryChange(category: string): void {\n    this.selectedCategory = category;\n    this.applyFilters();\n  }\n\n  viewProduct(id: number | undefined): void {\n    if (id !== undefined) {\n      this.router.navigate([`/inventory/product-detail/${id}`]);\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n\n  editProduct(id: number | undefined): void {\n    if (id !== undefined) {\n      if (this.userRole === 'user') {\n        alert('Only admin have the access');\n        return;\n      }\n      const pin = prompt('Enter admin pin (4 digits):');\n      if (pin && this.authService.verifyAdminPin(pin)) {\n        this.router.navigate([`/inventory/update-product/${id}`]);\n      } else {\n        alert('Invalid admin pin.');\n      }\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n\n  deleteProduct(productId: number | undefined): void {\n    if (productId !== undefined) {\n      if (this.userRole === 'user') {\n        alert('Only admin have the access');\n        return;\n      }\n      const pin = prompt('Enter admin pin (4 digits):');\n      if (pin && this.authService.verifyAdminPin(pin)) {\n        this.dataService.deleteProduct(productId).subscribe({\n          next: () => this.loadProducts(),\n          error: (err: Error) => this.errorMessage = err.message\n        });\n      } else {\n        alert('Invalid admin pin.');\n      }\n    } else {\n      this.errorMessage = 'Product ID is undefined';\n    }\n  }\n\n  checkStockAlerts(): void {\n    this.stockAlerts = [];\n    this.products.forEach(product => {\n      if (product.quantity < this.lowStockThreshold) {\n        this.stockAlerts.push(`${product.name} is low in stock (${product.quantity} units remaining)`);\n      }\n    });\n    if (this.stockAlerts.length > 0) {\n      alert(this.stockAlerts.join('\\n'));\n    }\n  }\n\n  getAvailabilityStatus(quantity: number): string {\n    if (quantity > 10) return 'In Stock';\n    if (quantity > 0) return 'Low Stock';\n    return 'Out of Stock';\n  }\n\n  getAvailabilityClass(status: string | undefined): string {\n    return status ? status.toLowerCase().replace(' ', '-') : 'out-of-stock';\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}