{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/data.service\";\nimport * as i2 from \"src/app/core/auth.service\";\nimport * as i3 from \"@angular/router\";\nexport class ProductListComponent {\n  constructor(dataService, authService, router) {\n    this.dataService = dataService;\n    this.authService = authService;\n    this.router = router;\n    this.searchTerm = '';\n    this.filteredProducts = [];\n    this.products = [];\n    this.categories = ['Electronics', 'Clothing', 'Books'];\n    this.selectedCategory = '';\n    this.stockAlerts = [];\n    this.lowStockThreshold = 5;\n    this.errorMessage = null;\n    this.activeTime = 0;\n    this.userRole = '';\n  }\n  ngOnInit() {\n    this.loadProducts();\n    this.loadUserData();\n  }\n  loadProducts() {\n    this.dataService.getProducts().subscribe({\n      next: products => {\n        this.products = products.map(product => ({\n          ...product,\n          availabilityStatus: this.getAvailabilityStatus(product.quantity)\n        }));\n        this.applyFilters();\n      },\n      error: err => this.errorMessage = err.message\n    });\n  }\n  loadUserData() {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    this.activeTime = user.activeTime || 0;\n    this.userRole = user.role || 'user';\n  }\n  applyFilters() {\n    let tempProducts = [...this.products];\n    if (this.selectedCategory) {\n      tempProducts = tempProducts.filter(product => product.category === this.selectedCategory);\n    }\n    if (this.searchTerm) {\n      tempProducts = tempProducts.filter(product => product.name.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    }\n    this.filteredProducts = tempProducts;\n    this.checkStockAlerts();\n  }\n  onSearch(event) {\n    this.searchTerm = event;\n    this.applyFilters();\n  }\n  onCategoryChange(category) {\n    this.selectedCategory = category;\n    this.applyFilters();\n  }\n  viewProduct(id) {\n    this.router.navigate([`/inventory/product-detail/${id}`]);\n  }\n  editProduct(id) {\n    if (this.userRole === 'user') {\n      alert('Only admin have the access');\n      return;\n    }\n    const pin = prompt('Enter admin pin (4 digits):');\n    if (pin && this.authService.verifyAdminPin(pin)) {\n      this.router.navigate([`/inventory/update-product/${id}`]);\n    } else {\n      alert('Invalid admin pin.');\n    }\n  }\n  deleteProduct(productId) {\n    if (this.userRole === 'user') {\n      alert('Only admin have the access');\n      return;\n    }\n    const pin = prompt('Enter admin pin (4 digits):');\n    if (pin && this.authService.verifyAdminPin(pin)) {\n      this.dataService.deleteProduct(productId).subscribe({\n        next: () => this.loadProducts(),\n        error: err => this.errorMessage = err.message\n      });\n    } else {\n      alert('Invalid admin pin.');\n    }\n  }\n  checkStockAlerts() {\n    this.stockAlerts = [];\n    this.products.forEach(product => {\n      if (product.quantity < this.lowStockThreshold) {\n        this.stockAlerts.push(`${product.name} is low in stock (${product.quantity} units remaining)`);\n      }\n    });\n    if (this.stockAlerts.length > 0) {\n      alert(this.stockAlerts.join('\\n'));\n    }\n  }\n  getAvailabilityStatus(quantity) {\n    if (quantity > 10) return 'In Stock';\n    if (quantity > 0) return 'Low Stock';\n    return 'Out of Stock';\n  }\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"app-product-list\"]],\n  decls: 0,\n  vars: 0,\n  template: function ProductListComponent_Template(rf, ctx) {},\n  styles: [\".inventory-container[_ngcontent-%COMP%] {\\r\\n    padding: 20px;\\r\\n  }\\r\\n  \\r\\n  h2[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n  }\\r\\n  \\r\\n  .search-add-container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    align-items: center;\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n  \\r\\n  .category-filter[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n  }\\r\\n  \\r\\n  .category-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\r\\n    margin-right: 10px;\\r\\n  }\\r\\n  \\r\\n  .category-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\r\\n    padding: 5px;\\r\\n    border-radius: 4px;\\r\\n    border: 1px solid #ddd;\\r\\n  }\\r\\n  \\r\\n  .add-button[_ngcontent-%COMP%] {\\r\\n    background-color: #4CAF50;\\r\\n    color: white;\\r\\n    padding: 10px 20px;\\r\\n    text-decoration: none;\\r\\n    border-radius: 4px;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    border-collapse: collapse;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    border: 1px solid #ddd;\\r\\n    padding: 8px;\\r\\n    text-align: left;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n    background-color: #f2f2f2;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n    margin-right: 5px;\\r\\n    padding: 5px 10px;\\r\\n    border: none;\\r\\n    border-radius: 4px;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child {\\r\\n    background-color: #2196F3;\\r\\n    color: white;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2) {\\r\\n    background-color: #FFC107;\\r\\n    color: black;\\r\\n  }\\r\\n  \\r\\n  .product-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child {\\r\\n    background-color: #f44336;\\r\\n    color: white;\\r\\n  }\\r\\n  \\r\\n  .error-message[_ngcontent-%COMP%] {\\r\\n    color: #ff0000;\\r\\n    margin-bottom: 10px;\\r\\n  }\\r\\n  \\r\\n  .user-info[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 10px;\\r\\n    font-style: italic;\\r\\n  }\\r\\n  \\r\\n  .user-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n    background-color: #f44336;\\r\\n    color: white;\\r\\n    padding: 5px 10px;\\r\\n    border: none;\\r\\n    border-radius: 4px;\\r\\n    cursor: pointer;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvaW52ZW50b3J5L3Byb2R1Y3QtbGlzdC9wcm9kdWN0LWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIsbUJBQW1CO0lBQ25CLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGFBQWE7SUFDYixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLHNCQUFzQjtFQUN4Qjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLHFCQUFxQjtJQUNyQixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0VBQzNCOztFQUVBOztJQUVFLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsWUFBWTtFQUNkOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZDs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxjQUFjO0lBQ2QsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsbUJBQW1CO0lBQ25CLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsZUFBZTtFQUNqQiIsInNvdXJjZXNDb250ZW50IjpbIi5pbnZlbnRvcnktY29udGFpbmVyIHtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIGgyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLnNlYXJjaC1hZGQtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLmNhdGVnb3J5LWZpbHRlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLmNhdGVnb3J5LWZpbHRlciBsYWJlbCB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5jYXRlZ29yeS1maWx0ZXIgc2VsZWN0IHtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbiAgfVxyXG4gIFxyXG4gIC5hZGQtYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0LXRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3QtdGFibGUgdGgsXHJcbiAgLnByb2R1Y3QtdGFibGUgdGQge1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0LXRhYmxlIHRoIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0LXRhYmxlIGJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdC10YWJsZSBidXR0b246Zmlyc3QtY2hpbGQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzIxOTZGMztcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3QtdGFibGUgYnV0dG9uOm50aC1jaGlsZCgyKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZDMTA3O1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdC10YWJsZSBidXR0b246bGFzdC1jaGlsZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuICBcclxuICAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICBjb2xvcjogI2ZmMDAwMDtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC51c2VyLWluZm8ge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICB9XHJcbiAgXHJcbiAgLnVzZXItaW5mbyBidXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0NDMzNjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["ProductListComponent","constructor","dataService","authService","router","ngOnInit","loadProducts","loadUserData","getProducts","subscribe","next","products","map","product","availabilityStatus","getAvailabilityStatus","quantity","applyFilters","error","err","errorMessage","message","user","JSON","parse","localStorage","getItem","activeTime","userRole","role","tempProducts","selectedCategory","filter","category","searchTerm","name","toLowerCase","includes","filteredProducts","checkStockAlerts","onSearch","event","onCategoryChange","viewProduct","id","navigate","editProduct","alert","pin","prompt","verifyAdminPin","deleteProduct","productId","stockAlerts","forEach","lowStockThreshold","push","length","join","selectors","decls","vars","template","styles"],"sourceRoot":"","sources":["C:\\Users\\malik\\Downloads\\Evaluation\\lab-angular-main\\src\\app\\features\\inventory\\product-list\\product-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/core/auth.service';\nimport { DataService } from 'src/app/core/data.service';\nimport { Product } from 'src/app/shared/models/product.mode';\n\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})\nexport class ProductListComponent implements OnInit {\n  searchTerm: string = '';\n  filteredProducts: Product[] = [];\n  products: Product[] = [];\n  categories: string[] = ['Electronics', 'Clothing', 'Books'];\n  selectedCategory: string = '';\n  stockAlerts: string[] = [];\n  lowStockThreshold: number = 5;\n  errorMessage: string | null = null;\n  activeTime: number = 0;\n  userRole: string = '';\n\n  constructor(\n    private dataService: DataService,\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.loadProducts();\n    this.loadUserData();\n  }\n\n  loadProducts(): void {\n    this.dataService.getProducts().subscribe({\n      next: (products: Product[]) => {\n        this.products = products.map(product => ({\n          ...product,\n          availabilityStatus: this.getAvailabilityStatus(product.quantity)\n        }));\n        this.applyFilters();\n      },\n      error: (err: Error) => this.errorMessage = err.message\n    });\n  }\n\n  loadUserData(): void {\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\n    this.activeTime = user.activeTime || 0;\n    this.userRole = user.role || 'user';\n  }\n\n  applyFilters(): void {\n    let tempProducts: Product[] = [...this.products];\n    if (this.selectedCategory) {\n      tempProducts = tempProducts.filter(product => product.category === this.selectedCategory);\n    }\n    if (this.searchTerm) {\n      tempProducts = tempProducts.filter(product =>\n        product.name.toLowerCase().includes(this.searchTerm.toLowerCase())\n      );\n    }\n    this.filteredProducts = tempProducts;\n    this.checkStockAlerts();\n  }\n\n  onSearch(event: string): void {\n    this.searchTerm = event;\n    this.applyFilters();\n  }\n\n  onCategoryChange(category: string): void {\n    this.selectedCategory = category;\n    this.applyFilters();\n  }\n\n  viewProduct(id: number): void {\n    this.router.navigate([`/inventory/product-detail/${id}`]);\n  }\n\n  editProduct(id: number): void {\n    if (this.userRole === 'user') {\n      alert('Only admin have the access');\n      return;\n    }\n    const pin = prompt('Enter admin pin (4 digits):');\n    if (pin && this.authService.verifyAdminPin(pin)) {\n      this.router.navigate([`/inventory/update-product/${id}`]);\n    } else {\n      alert('Invalid admin pin.');\n    }\n  }\n\n  deleteProduct(productId: number): void {\n    if (this.userRole === 'user') {\n      alert('Only admin have the access');\n      return;\n    }\n    const pin = prompt('Enter admin pin (4 digits):');\n    if (pin && this.authService.verifyAdminPin(pin)) {\n      this.dataService.deleteProduct(productId).subscribe({\n        next: () => this.loadProducts(),\n        error: (err: Error) => this.errorMessage = err.message\n      });\n    } else {\n      alert('Invalid admin pin.');\n    }\n  }\n\n  checkStockAlerts(): void {\n    this.stockAlerts = [];\n    this.products.forEach(product => {\n      if (product.quantity < this.lowStockThreshold) {\n        this.stockAlerts.push(`${product.name} is low in stock (${product.quantity} units remaining)`);\n      }\n    });\n    if (this.stockAlerts.length > 0) {\n      alert(this.stockAlerts.join('\\n'));\n    }\n  }\n\n  getAvailabilityStatus(quantity: number): string {\n    if (quantity > 10) return 'In Stock';\n    if (quantity > 0) return 'Low Stock';\n    return 'Out of Stock';\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}